/**
 * Ratna Gems - YouTube Video Facade Styles
 * 
 * FIX LOG:
 * - Increased CSS specificity to override style.css rules
 * - Fixed object-fit conflicts (style.css sets cover, we need contain)
 * - Added proper vertical centering for thumbnails
 * - Removed black background issues
 */

/* --- STANDARD (CONTENT) USAGE --- */
.rg-video-wrapper {
    position: relative;
    width: 100%;
    aspect-ratio: 16 / 9; /* Standard widescreen ratio for content embeds */
    height: auto;
    border-radius: 12px;
    overflow: hidden;
    box-shadow: 0 10px 25px -5px rgba(0, 78, 129, 0.1);
    margin: 0rem auto;
}

.single-product .entry-content .rg-video-wrapper {
    max-width: 700px;
}

/* --- PRODUCT GALLERY SPECIFIC USAGE --- */
/* 
 * FIX: Increased specificity to override style.css rules.
 * style.css selector: .woocommerce-product-gallery .woocommerce-product-gallery__image img
 * Specificity: 2 classes + 1 element = 0,0,2,1
 * 
 * Our selector must be MORE specific to override object-fit: cover
 */

/* Video wrapper container - no aspect ratio here, parent controls it */
.woocommerce-product-gallery .woocommerce-product-gallery__image.rg-shortcode-slide .rg-video-wrapper {
    aspect-ratio: unset;
    width: 100%;
    height: 100%;
    margin: 0;
    padding: 0;
    border-radius: 0;
    box-shadow: none;
    background: transparent;
    display: flex;
    align-items: center;
    justify-content: center;
    overflow: hidden;
}

/* 
 * FIX: Poster image - HIGH SPECIFICITY selector
 * Must override: .woocommerce-product-gallery .woocommerce-product-gallery__image img (0,0,2,1)
 * Our specificity: .woocommerce-product-gallery .woocommerce-product-gallery__image.rg-shortcode-slide .rg-video-wrapper img.rg-video-poster
 * = 5 classes + 1 element = 0,0,5,1 (much higher!)
 */
.woocommerce-product-gallery .woocommerce-product-gallery__image.rg-shortcode-slide .rg-video-wrapper img.rg-video-poster {
    width: 100%;
    height: 100%;
    object-fit: contain; /* Don't crop - fit within container */
    object-position: center center; /* Vertically and horizontally center */
    display: block;
    background: transparent;
    position: relative;
    max-width: 100%;
    max-height: 100%;
}

/* Fallback with !important for stubborn overrides (safety net) */
.woocommerce-product-gallery .rg-video-wrapper .rg-video-poster {
    object-fit: contain !important;
    object-position: center center !important;
    background: transparent !important;
}

/* iframe for when video is playing */
.woocommerce-product-gallery .woocommerce-product-gallery__image.rg-shortcode-slide .rg-video-wrapper iframe {
    width: 100%;
    height: 100%;
    aspect-ratio: 16 / 9;
    max-height: 100%;
    object-fit: contain;
    border: 0;
}

/* --- THUMBNAIL STRIP FIXES --- */
/*
 * FIX: Video thumbnail vertical centering
 * The thumbnail container is 4:3 (from style.css) but video thumb is 16:9
 * Need flexbox centering to vertically align the image
 */
.woocommerce-product-gallery .ast-woocommerce-product-gallery__image.rg-video-thumbnail {
    display: flex;
    align-items: center;
    justify-content: center;
    overflow: hidden;
    background: transparent;
}

/*
 * FIX: Video thumbnail image - override the object-fit: cover from style.css
 * style.css selector: .woocommerce-product-gallery .ast-woocommerce-product-gallery__image img
 * Our selector is more specific with the extra class
 */
.woocommerce-product-gallery .ast-woocommerce-product-gallery__image.rg-video-thumbnail img,
.woocommerce-product-gallery .ast-woocommerce-product-gallery__image.rg-video-thumbnail img.rg-video-thumb-img {
    width: 100%;
    height: 100%;
    object-fit: contain; /* Show full thumbnail without cropping */
    object-position: center center;
    display: block;
    background: transparent;
}

/* --- COMMON ELEMENTS --- */
.rg-video-facade {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-size: contain;
    background-position: center;
    background-repeat: no-repeat;
    cursor: pointer;
    border-radius: inherit;
    z-index: 1;
}

/* Fallback for content usage poster */
.rg-video-wrapper:not(.woocommerce-product-gallery *) .rg-video-poster {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    object-fit: contain;
    display: block;
    z-index: 0;
}

/* Accessibility focus ring */
.rg-video-wrapper:focus-visible {
    outline: none;
    box-shadow: 0 0 0 4px #FFFFFF, 0 0 0 6px #004E81;
}

/* Standard content usage iframe */
.rg-video-wrapper:not(.woocommerce-product-gallery *) iframe {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    border: 0;
}

/* --- PLAY BUTTON STYLES --- */
.rg-play-button {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 68px;
    height: 48px;
    transition: transform 0.2s ease;
    pointer-events: none;
    z-index: 2;
}

/* Ensure play button is visible in gallery context */
.woocommerce-product-gallery .rg-video-wrapper .rg-play-button {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 68px;
    height: 48px;
    z-index: 10; /* Higher z-index in gallery context */
    display: block;
}

/* Play button hover effect */
.rg-video-wrapper:hover .rg-play-button {
    transform: translate(-50%, -50%) scale(1.1);
}

/* SVG fill color (the red background of YouTube button) */
.rg-play-button-fill {
    fill: #D32F2F;
    transition: fill 0.2s ease;
}

.rg-video-wrapper:hover .rg-play-button-fill {
    fill: #E53935;
}

/* Hide play button when video is active */
.rg-video-wrapper.video-activated .rg-play-button {
    display: none;
}

/* Visually hidden text for screen readers */
.rg-visually-hidden {
    position: absolute;
    width: 1px;
    height: 1px;
    margin: -1px;
    padding: 0;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    border: 0;
    white-space: nowrap;
}

/* --- GALLERY PARENT BACKGROUND FIX --- */
/*
 * FIX: Ensure no black background bleeds through
 * Set transparent background on all parent containers
 */
.woocommerce-product-gallery.has-rg-product-video .woocommerce-product-gallery__image.rg-shortcode-slide {
    background: transparent;
}

.woocommerce-product-gallery.has-rg-product-video figure.rg-video-wrapper {
    background: transparent;
}

/* Ensure the flex-viewport doesn't add background */
.woocommerce-product-gallery.has-rg-product-video .flex-viewport {
    background: transparent;
}
